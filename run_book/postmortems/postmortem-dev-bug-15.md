# Postmortem DEV-8：Write 工具调用缺少 content 参数反复失败

## 根因

Write 调用前输出大段分析文本，耗尽输出 token 预算，content 参数还没生成就被截断为空。

- 第一次：文档内容量大（300+ 行）→ "一次性写完但还没准备好" → 反复提交空调用
- 第二次（复发）：连续 8+ 次失败仍用 Write 重试，用户说换 Edit 还继续用 Write

## 大文档写入防卡死规则

1. 调研阶段控制在 2-3 轮，读完模板 + 需求文档就开始写，其他文件边写边查
2. 写大文档时直接动手组装 content，不要空转犹豫
3. 写大文件前少废话，把 token 预算留给 content
4. Write 失败 1 次 → 立刻换策略：Write 极简骨架 + Edit 分段补充
5. 连续 2 次同一错误 → 停下来告诉用户卡住了，换思路
6. 绝不允许连续 3 次以上相同的失败调用
7. 用户说换方法就立刻换，不固执
