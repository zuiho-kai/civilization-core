# Postmortem DEV-6：修复代码时只看 bug 点，不做影响面分析

## 修复前必做检查清单

1. grep 被改变量/函数的所有引用点，逐个确认语义是否仍成立
2. 如果改变了赋值语义（增量→覆盖、必传→可选），追踪所有下游消费者
3. 改完后做"涟漪推演"：这个改动会让哪些下游行为变化？
4. 删参数/改签名时，grep 所有调用方 + 测试中的 assert
5. 不靠隐式假设保安全，用显式代码结构保安全（elif/identity check）

> 每次修复都改变代码结构，改变本身可能引入新的边界问题。目标是 review 循环 ≤2 轮。
