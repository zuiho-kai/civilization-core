# 错题本 — 设计阶段（IR/SR/AR）

> 适用场景：写 IR/SR/AR、UI 设计稿、功能设计评估

### 记录规则

- **条目结构**：❌ 错误做法 + ✅ 正确做法，整条控制在 **5 行以内**
- **❌/✅ 写法**：只写核心规则，禁止多层加粗嵌套（加粗最多一层）
- **`>` 注释**：只放归因路径字母和 postmortem 链接，禁止复述场景
- **复犯**：只追加频率标记（🟡×N / 🔴×N）
- **归属**：条目只写本范围内容，跨范围写到对应文件

### DEV-38 编码前跳过 AR → 安全/异常/配置全面失守 `🟢`

❌ 编码前没写 AR → P0×4
✅ 编码前必须有独立 AR，覆盖：异常传播/副作用时序/安全检查/可配置项/并发安全（"先查后改"必须原子化）
> 归因 A。详见 [postmortem-dev-38.md](../postmortems/postmortem-dev-38.md)

### DEV-39 前端改动跳过 UI 设计稿 + 美学验收 `🟡中频×2`

❌ 前端改动跳过阶段 2.5（UI 设计稿）和 6.5（美学验收）；美学审核合并到 CR 里一笔带过
✅ 改了 .css/.tsx 可见元素 = 需要走 2.5 + 6.5。美学审核是独立 gate：读 CSS 审配色/间距/响应式→读 TSX 审信息层级/空状态/a11y→输出结论。不能合并到 CR

### DEV-40 功能设计脱离基础设施现实 `🟢`

❌ 设计需要秒级响应的功能，但底层只有小时级 tick
✅ SR 设计新功能时必须评估：当前调度周期能发挥设计效果吗？不能→先改基础设施或降低预期
> 归因 D

### DEV-44 SR/AR 文档与代码签名不同步 `🟢`

❌ SR 写 `-> str`，实际实现 `-> str | None`；AR 风险表漏掉 prompt 注入
✅ SR 完成后对照代码签名做 diff；AR 风险表固定检查：是否有用户可控内容拼入 LLM prompt

### DEV-45 跳过阶段 0 直接写 IR `🟢`

❌ 把用户一对一对话等同于"五方脑暴已完成"，直接写 IR
✅ 五方脑暴 ≠ 用户对话，必须 TeamCreate 拉五方角色发散讨论，用户拍板后才能写 IR
